//toolbar布局计算
function toolbarlayout(){var e=$("#toolbar").width(),t=0;$(".btn:not(.hidden)").each(function(){t+=$(this).outerWidth(!0)});var n=e-t;$("#omnibox").width(n-$("#omnibox").outerWidth(!0)+$("#omnibox").width());var r=0;$(".omnibtn").each(function(){r+=$(this).outerWidth(!0)});$("#omniinput").width($("#omnibox").width()-r)}function hideAllFloat(){$(".menu").addClass("menuHide");$(".menu").removeClass("menuShow");$(".menuBtn").removeClass("on");$(".panelBtn").removeClass("on");$(".panel").hide();$(".panel").addClass("panelHide");$(".panel").removeClass("panelShow");$(".floatbox").addClass("menuHide");$(".floatbox").removeClass("menuShow")}function sidebarItemShow(e){e.siblings().removeClass("sidebarItemShow");e.addClass("sidebarItemShow")}$("#omniinput").keyup(function(e){e.keyCode===13&&$(".frame.showframe").each(function(){var e=$("#omniinput").val();if(e.match("http://"))var t=e;else if(e.match("file://"))var t=e;else if(e.match("chrome://"))var t=e;else if(e.match("about://"))var t=e;else if(e.match("https://"))var t=e;else var t="http://"+e;$(this).attr("src",t);$(".tab_current .tabtitle").html(e);var n={siteIcon:"http://www.google.com/s2/favicons?domain={{siteUrl}}"},r=t,i=n.siteIcon.replace("{{siteUrl}}",r);$(".tab_current .favicon").attr("src",i)})});$("#btn_refresh").mousedown(function(){$(".frame.showframe").each(function(){var e=$(this).attr("src");$(this).attr("src",e)})});$("#btn_homepage").mousedown(function(){$(".frame.showframe").each(function(){var e="http://daohang.qq.com";$(this).attr("src",e);$("#omniinput").val("http://daohang.qq.com");$(".tab_current .tabtitle").html("上网导航");$(".tab_current .favicon").attr("src","http://daohang.qq.com/favicon.ico")})});$(".btn").mousedown(function(){$(this).siblings().removeClass("on");$(this).hasClass("toggleBtn")&&$(this).toggleClass("on");if($(this).hasClass("menuBtn")){$("#"+$(this).attr("id")+"_menu").siblings().addClass("menuHide");$("#"+$(this).attr("id")+"_menu").siblings().removeClass("menuShow")}else{$(".menu").addClass("menuHide");$(".floatbox").addClass("menuHide")}});$("#webmask").mousedown(function(){hideAllFloat();$(this).hide()});$(".btn.menuBtn.toggleBtn").mousedown(function(){$("#webmask").show();var e=$(this).attr("id")+"_menu";$("#"+e).toggleClass("menuHide");$("#"+e).toggleClass("menuShow");var t=$("#"+e).width();if($(this).hasClass("right"))var n=$(this).offset().left+$(this).outerWidth()-t;else var n=$(this).offset().left;var r=$(this).offset().top+$(this).outerHeight()+5;$("#"+e).css("left",n);$("#"+e).css("top",r)});$(".menu > li").click(function(){$(this).parent().addClass("menuHide");$(this).parent().removeClass("menuShow");$(".menuBtn").removeClass("on");$("#webmask").hide()});$(".panelBtn").mousedown(function(){$(this).hasClass("toggleBtn")&&$(this).toggleClass("on")});$(".panelBtn.toggleBtn").mousedown(function(){$("#webmask").show();var e=$(this).attr("id")+"_panel";$("#"+e).slideDown(300);$("#"+e).toggleClass("panelHide");$("#"+e).toggleClass("panelShow")});$("#tabList").mousedown(function(){var e=$("#tabbar").offset().left,t=$("#tabbar").offset().top+$("#tabbar").outerHeight(),n=$("#browser").width();$("#tabList_panel").css("left",e);$("#tabList_panel").css("top",t);$("#tabList_panel").outerWidth(n);$("#tabList_tabs").remove();$("#tabs").clone(!0).appendTo($("#tabList_panel"));$("#tabList_panel>#tabs").attr("id","tabList_tabs");$("#tabList_tabs").removeClass("");$("#tabList_tabs>.tab_current").attr("class","tablist_current");$("#tabList_tabs>.tab_back").attr("class","tablist_back");$("#tabList_tabs").removeAttr("style");$("#tabList_tabs").children().removeClass("tab");$("#tabList_tabs").children().removeAttr("style");$("#tabList_tabs").children().addClass("tabList_tab");$(".tablist_current").css("background-color",colorconfig[$(".tablist_current").attr("tabcolor")])});$(document).on("mouseover",".tablist_back",function(){$(this).css("background-color",lightcolorconfig[$(this).attr("tabcolor")])});$(document).on("mouseout",".tablist_back",function(){$(this).css("background-color","rgba(0,0,0,0.06)")});$(document).on("click",".tablist_back",function(){$(this).removeClass("tablist_back");$(this).addClass("tablist_current");$(this).siblings().removeClass("tablist_current");$(this).siblings().addClass("tablist_back");$(this).siblings().css("background-color","rgba(0,0,0,0.06)");$(this).css("background-color",colorconfig[$(this).attr("tabcolor")]);var e=$("#tabList_tabs").children(".tablist_current").index("#tabList_panel ul li"),t=$("#tabs").children().eq(e);activateTab(t)});$(document).on("click",".tabList_tab .tabclose",function(){var e=$(this).parents(".tabList_tab").index("#tabList_panel ul li"),t=$("#tabs").children().eq(e),n=$(this).parents(".tabList_tab").next();$("#tabList_tabs .tabList_tab").removeClass("tablist_current");$("#tabList_tabs .tabList_tab").addClass("tablist_back");$("#tabList_tabs .tabList_tab").removeAttr("style");n.length>0?n.addClass("tablist_current"):$(this).parents(".tabList_tab").prev().addClass("tablist_current");$("#tabList_tabs .tablist_current").removeAttr("style");$("#tabList_tabs .tablist_current").removeClass("tablist_back");closeTab(t);$(this).parents(".tabList_tab").remove();$("#tabList_tabs .tablist_current").css("background-color",colorconfig[$("#tabList_tabs .tablist_current").attr("tabcolor")])});$(".sidebarBtn").mousedown(function(){$("#sidebar").hasClass("visible")&&$("#"+$(this).attr("id")+"_sidebar").hasClass("sidebarItemShow")?sidebarhide():sidebarshow();var e=$(this).attr("id")+"_sidebar";sidebarItemShow($("#"+e),function(){});sidebarlayout();weblayout()});$("#btn_back").click(function(){top.window.history.back()});$("#btn_forward").click(function(){top.window.history.forward()});