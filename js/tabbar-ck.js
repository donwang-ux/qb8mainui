function tabsnumber(){var e=$(".tab").size();$("#tablistnumber").html(e)}function showhide(){var e=$(".tab").outerWidth();if(e<100&&e>40){$(".tab").addClass("tabwidth100");$(".tab").removeClass("tabwidth40 tabwidth36")}else if(e<=40&&e>30){$(".tab").addClass("tabwidth40");$(".tab").removeClass("tabwidth100 tabwidth36")}else if(e<=30&&e>18){$(".tab").addClass("tabwidth36");$(".tab").removeClass("tabwidth100 tabwidth40")}else if(e>=100){$(".favicon").show();$(".tab").removeClass("tabwidth100 tabwidth40 tabwidth36")}}function marktab(){$(".tab").removeClass("prevtab nexttab first_tab last_tab");$("#tabs li:first").addClass("first_tab");$("#tabs li:last").addClass("last_tab");$(".tab_current").removeClass("tab_back");$(".tab_current").prev(".tab").addClass("prevtab");$(".tab_current").next(".tab").addClass("nexttab");$(".tab_current").siblings(".tab").addClass("tab_back");tabsnumber()}function newtab(e,t,n,r){$("#tabs").append('<li class="tab tab_back" tabcolor="'+e+'"><img class="favicon" src="'+r+'"><span class="tabtitle">'+n+'</span><div class="tabclose"></div></li>');$("#web").append('<iframe src="'+t+'" width="100%" height="100%" class="frame"></iframe>');showhide();marktab()}function tabslayout(){$("#tabs").width($("#tabbar").width()-$("#newTab").outerWidth());tabnumber=$(".tab").size();var e=$("#tabs").width(),t=(e-4+3)/tabnumber-3;$(".tab").outerWidth(t);if($(".tab").outerWidth()>=262){$(".tab").outerWidth(262);$("#tabs").removeClass("max");$("#tabs").width(($(".tab").outerWidth()+3)*tabnumber+4);$("#tabList").addClass("hide")}else if($(".tab").outerWidth()<262&&$(".tab").outerWidth()>120){$("#tabs").addClass("max");$("#browser").hasClass("tabup")?$("#tabs").outerWidth($("#tabbar").width()-$("#newTab").outerWidth(!0)):$("#tabs").outerWidth($("#tabbar").width()-$("#newTab").outerWidth(!0)-50);$(".tab").outerWidth($("#tabs").width()/$(".tab").size()-3);$("#tabList").addClass("hide")}else if($(".tab").outerWidth()<=120){$("#tabs").addClass("max");$("#tabList").removeClass("hide");$("#browser").hasClass("tabup")?$("#tabs").outerWidth($("#tabbar").width()-$("#newTab").outerWidth(!0)-$("#tabList").outerWidth(!0)):$("#tabs").outerWidth($("#tabbar").width()-$("#newTab").outerWidth(!0)-$("#tabList").outerWidth(!0)-50);$(".tab").outerWidth($("#tabs").width()/$(".tab").size()-3)}}function framechange(){var e=$("#tabs").children(".tab_current").index("#tabbar ul li"),t=$("#web").children().eq(e);t.siblings().removeClass("showframe");t.addClass("showframe");var n=t.attr("src");if(n.match("http://")){n=n.replace("http://","");$("#omniinput").val(n)}else $("#omniinput").val(n)}function activateTab(e){e.siblings(".tab").removeClass("tab_current");e.siblings(".tab").addClass("tab_back");e.hasClass("tab_back")&&e.addClass("recent");e.removeClass("tab_back");e.addClass("tab_current");e.css("background-color",colorconfig[e.attr("tabcolor")]);e.siblings(".tab").css("background-color","transparent");framechange();marktab();showhide()}function marktabtempover(e){$(".tab").removeClass("prevtabtemp nexttabtemp");e.next(".tab_back").addClass("nexttabtemp");e.prev(".tab_back").addClass("prevtabtemp")}function marktabtempout(e){$(".tab").removeClass("prevtabtemp nexttabtemp");e.next(".tab_back").removeClass("nexttabtemp");e.prev(".tab_back").removeClass("prevtabtemp")}function undotab(){if(closedTabNumber==0){$('<li class="tab tab_current" tabcolor="'+closedTabColor+'"><img class="favicon" src="'+closedTabIcon+'"><span class="tabtitle">'+closedTabTitle+'</span><div class="tabclose"></div></li>').insertBefore($("#tabs").children().eq(closedTabNumber));$('<iframe src="'+closedTabUrl+'" width="100%" height="100%" class="frame showframe"></iframe>').insertBefore($("#web").children().eq(closedTabNumber))}else{$('<li class="tab tab_current" tabcolor="'+closedTabColor+'"><img class="favicon" src="'+closedTabIcon+'"><span class="tabtitle">'+closedTabTitle+'</span><div class="tabclose"></div></li>').insertAfter($("#tabs").children().eq(closedTabNumber-1));$('<iframe src="'+closedTabUrl+'" width="100%" height="100%" class="frame showframe"></iframe>').insertAfter($("#web").children().eq(closedTabNumber-1))}activateTab($($("#tabs").children().eq(closedTabNumber)));showhide();marktab();tabslayout()}function closeTab(e,t){$("#undoTab").removeClass("disabled");closedTabNumber=e.index();closedTabIcon=e.children(".favicon").attr("src");closedTabTitle=e.children(".tabtitle").html();closedTabColor=e.attr("tabcolor");closedTabUrl=$("#web").children().eq(closedTabNumber).attr("src");var n=e.index("#tabbar ul li"),r=$("#web").children().eq(n).next();r.length>0?r.addClass("showframe"):$("#web").children().eq(n).prev().addClass("showframe");$("#web").children().eq(n).remove();if(e.hasClass("tab_current")){var i=e.next();e.siblings().removeClass("prevtab");e.siblings().removeClass("nexttab");e.prev().addClass("prevtab");i.next().addClass("nexttab");i.length>0?i.addClass("tab_current"):e.prev().addClass("tab_current");i.length>0?i.css("background-color",colorconfig[i.attr("tabcolor")]):e.prev().css("background-color",colorconfig[e.prev().attr("tabcolor")]);e.remove()}else{$(".tab_current").prev().addClass("prevtab");e.remove();$(".tab_current").next().addClass("nexttab")}tabslayout();marktab();$(".tab").removeClass("prevtabtemp nexttabtemp");framechange();$.isFunction(t)&&t();$(".tab").outerWidth()>100&&(tmpNewTabClick=1)}var closedTabNumber=0,tabnumber=1,tmpNewTabClick=1;$("#newTab").mousedown(function(){newtab("browserdefault","newtab/index.html","新页面","welcome/favicon.png");var e=$(".tab").size(),t=$("#tabs").width(),n=(t-4-3*e)/e;$(".tab").outerWidth(n);if($("#tabs").hasClass("max")&&$(".tab").outerWidth()<=120){$("#tabList").removeClass("hide");tmpNewTabClick==1&&(tmpNewTabClick=2);$(".tab").outerWidth($("#tabs").width()/$(".tab").size()-3)}activateTab($($("#tabs").get(0).lastChild));marktab();$("#omniinput").val("");window.setTimeout("document.getElementById('omniinput').focus();",350)});$("#newTab").mouseout(function(){$("#tabs").hasClass("max")||tabslayout()});$("#undoTab").click(function(){$(this).hasClass("disabled")||undotab()});$("#btn_undotab").click(function(){$(this).hasClass("disabled")||undotab()});$("#tabs").on("click",".tabclose",function(){closeTab($(this).parents(".tab"),function(){})}).on("mousedown",".tab",function(){activateTab($(this))}).on("dblclick",".tab",function(){closeTab($(this),function(){})}).on("mouseover",".tab",function(){marktabtempover($(this));if($(this).hasClass("tab_back")){$(this).css({"background-color":lightcolorconfig[$(this).attr("tabcolor")]});$(this).addClass("transition")}}).on("mouseout",".tab",function(){marktabtempout($(this));$(this).removeClass("recent");if($(this).hasClass("tab_back")){$(this).css("background-color","transparent");$(this).removeClass("transition")}});var isClick_=!0;$("#omniinput").focusout(function(){$(this).val($(this).val());isClick_=!0});$("#omniinput").click(function(){if(isClick_){$(this).select();isClick_=!1}});$(".tab").outerWidth(0);activateTab($($("#tabs").children()[0]));marktab();marktabtempover();marktabtempout();