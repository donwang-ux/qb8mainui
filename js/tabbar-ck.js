//当宽度小于XX，隐藏favicon
function showhide(){if($(".tab").width()<100){$(".favicon").hide();$(".tab").addClass("noicon")}else{$(".favicon").show();$(".tab").removeClass("noicon")}}function newtab(){$("#tabs").append('<li class="tab tab_back"><img class="favicon" src="http://www.baidu.com/favicon.ico"><span class="tabtitle">常用网站</span><div class="tabclose"></div></li>');showhide()}function tabslayout(){var e=$(".tab").size(),t=$("#tabs").width(),n=Math.floor(t/e);$(".tab").outerWidth(n)}function framechange(){var e=$("#tabs").children(".tab_current").index("ul li");$("#web").children().eq(e).siblings().removeClass("showframe");$("#web").children().eq(e).addClass("showframe")}function tabclick(){$(".tab").click(function(){$(this).siblings().removeClass("tab_current");$(this).addClass("tab_current");framechange();marktab()})}function marktab(){$("#tabs li:first").addClass("first_tab");$("#tabs li:last").addClass("last_tab");$(".tab").removeClass("prevtab nexttab");$(".tab_current").removeClass("tab_back");$(".tab_current").prev().addClass("prevtab");$(".tab_current").next().addClass("nexttab");$(".tab_current").siblings().addClass("tab_back")}function closeTab(){var e=$(this).index("ul li");$("#web").children().eq(e).next().addClass("showframe");$("#web").children().eq(e).remove();if($(this).hasClass("tab_current")){$(this).siblings().removeClass("prevtab");$(this).siblings().removeClass("nexttab");$(this).prev().addClass("prevtab");$(this).next().next().addClass("nexttab");$(this).next().addClass("tab_current");$(this).remove()}else{$(".tab_current").prev().addClass("prevtab");$(this).remove();$(".tab_current").next().addClass("nexttab")}tabslayout();marktab()}$("#newTab").click(function(){newtab();tabslayout();tabclick();marktab();$(".tabclose").click(function(){$(this).parent().remove()})});$(".tabclose").click(function(){closeTab.call($(this).parent().get(0))});$(".tab").dblclick(function(){closeTab.call(this)});tabslayout();tabclick();marktab();