//当宽度小于XX，隐藏favicon
function showhide(){var e=$(".tab").width();if(e<160&&e>40){$(".tab").addClass("tabwidth100");$(".tab").removeClass("tabwidth40 tabwidth36")}else if(e<=40&&e>28){$(".tab").addClass("tabwidth40");$(".tab").removeClass("tabwidth100 tabwidth36")}else if(e<=28&&e>18){$(".tab").addClass("tabwidth36");$(".tab").removeClass("tabwidth100 tabwidth40")}else if(e>=160){$(".favicon").show();$(".tab").removeClass("tabwidth100 tabwidth40 tabwidth36")}}function marktab(){$(".tab").removeClass("prevtab nexttab first_tab last_tab");$("#tabs li:first").addClass("first_tab");$("#tabs li:last").addClass("last_tab");$(".tab_current").removeClass("tab_back");$(".tab_current").prev().addClass("prevtab");$(".tab_current").next().addClass("nexttab");$(".tab_current").siblings().addClass("tab_back")}function newtab(){$("#tabs").append('<li class="tab tab_back" tabcolor="browserdefault"><img class="favicon" src="welcome/favicon.png"><span class="tabtitle">常用网站</span><div class="tabclose"></div></li>');$("#web").append('<iframe src="newtab/newtab.html" width="100%" height="100%" class="frame"></iframe>');showhide();marktab()}function tabslayout(){var e=$(".tab").size(),t=$("#tabs").width(),n=Math.floor(t/e);$(".tab").outerWidth(n);$("#tabbar").width()-$("#tabs").width()-$("#newTab").outerWidth()>=$(".tab").width()-10&&$(".tab").outerWidth(($("#tabbar").width()-$("#newTab").outerWidth()-$(".tab").size()*5)/$(".tab").size())}function framechange(){var e=$("#tabs").children(".tab_current").index("#tabbar ul li"),t=$("#web").children().eq(e);t.siblings().removeClass("showframe");t.addClass("showframe");$("#omniinput").val(t.attr("src"))}function activateTab(e){e.siblings().removeClass("tab_current");e.siblings().addClass("tab_back");e.removeClass("tab_back");e.addClass("tab_current");e.addClass("recent");e.css("background-color",colorconfig[e.attr("tabcolor")]);e.siblings().css("background-color","transparent");framechange();marktab();showhide()}function marktabtempover(e){$(".tab").removeClass("prevtabtemp nexttabtemp");e.next(".tab_back").addClass("nexttabtemp");e.prev(".tab_back").addClass("prevtabtemp")}function marktabtempout(e){$(".tab").removeClass("prevtabtemp nexttabtemp");e.next(".tab_back").removeClass("nexttabtemp");e.prev(".tab_back").removeClass("prevtabtemp")}function closeTab(e,t){var n=e.index("ul li"),r=$("#web").children().eq(n).next();r.length>0?r.addClass("showframe"):$("#web").children().eq(n).prev().addClass("showframe");$("#web").children().eq(n).remove();if(e.hasClass("tab_current")){var i=e.next();e.siblings().removeClass("prevtab");e.siblings().removeClass("nexttab");e.prev().addClass("prevtab");i.next().addClass("nexttab");i.length>0?i.addClass("tab_current"):e.prev().addClass("tab_current");i.length>0?i.css("background-color",colorconfig[i.attr("tabcolor")]):e.prev().css("background-color",colorconfig[e.prev().attr("tabcolor")]);e.remove()}else{$(".tab_current").prev().addClass("prevtab");e.remove();$(".tab_current").next().addClass("nexttab")}tabslayout();marktab();$(".tab").removeClass("prevtabtemp nexttabtemp");framechange();$.isFunction(t)&&t()}$("#newTab").mousedown(function(){newtab();tabslayout();activateTab($($("#tabs").get(0).lastChild));marktab();$("#omniinput").val("");window.setTimeout("document.getElementById('omniinput').focus();",350)});$("#tabs").on("click",".tabclose",function(){closeTab($(this).parents(".tab"),function(){})}).on("mousedown",".tab",function(){activateTab($(this))}).on("dblclick",".tab",function(){closeTab($(this),function(){})}).on("mouseover",".tab",function(){marktabtempover($(this));$(this).hasClass("tab_back")&&$(this).css("background-color",lightcolorconfig[$(this).attr("tabcolor")])}).on("mouseout",".tab",function(){marktabtempout($(this));$(this).removeClass("recent");$(this).hasClass("tab_back")&&$(this).css("background-color","transparent")});var isClick_=!0;$("#omniinput").focusout(function(){$(this).val($(this).val());isClick_=!0});$("#omniinput").click(function(){if(isClick_){$(this).select();isClick_=!1}});activateTab($($("#tabs").children()[0]));marktab();marktabtempover();marktabtempout();